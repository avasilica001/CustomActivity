<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Custom Activity Mock</title>
    <script src="https://unpkg.com/postmonger"></script>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>      
    <div id="loader-container">
      <p>Cargando configuración...</p>
    </div>

    <div id="form-container">
      <div class="header">
        <h2>Configuración de la Actividad</h2>
      </div>
      
      <div class="info-box info">
        <p>Configure los parámetros que se enviarán al servicio externo para cada contacto en el Journey.</p>
      </div>

      <div class="form-section">
        <h3 class="section-title">Parámetros Estáticos</h3>
        
        <div class="form-field">
          <label>Origen del Prompt</label>
          <div class="radio-group">
            <input type="radio" id="prompt-de" name="prompt-source" value="de" checked>
            <label for="prompt-de">Usar prompt de la DE de origen</label>
            <input type="radio" id="prompt-write" name="prompt-source" value="write">
            <label for="prompt-write">Escribir prompt</label>
          </div>
        </div>
        
        <div id="text-input-container" style="display: none;"> 
          <div class="form-field">
            <label for="text-input">Prompt de Referencia</label>
            <input type="text" id="text-input" placeholder="Introduzca un valor de texto"/>
            <div class="field-desc">Este valor se usará como prompt para que Gemini genere un asunto.</div>
          </div>
        </div>
        
      </div>
    </div>
    
    <script src="js/ui.js"></script>
    <script>
      // Lógica de JavaScript para mostrar/ocultar el campo de texto
      document.addEventListener('DOMContentLoaded', function() {
        const radioButtons = document.querySelectorAll('input[name="prompt-source"]');
        const textInputContainer = document.getElementById('text-input-container');

        // Función para manejar el cambio
        function handlePromptSourceChange() {
          if (document.getElementById('prompt-write').checked) {
            textInputContainer.style.display = 'block'; // Muestra el contenedor
          } else {
            textInputContainer.style.display = 'none'; // Oculta el contenedor
          }
        }

        // Asignar el evento 'change' a todos los radio buttons
        radioButtons.forEach(radio => {
          radio.addEventListener('change', handlePromptSourceChange);
        });

        // Llamar una vez al inicio para establecer el estado correcto (si "Escribir prompt" NO está marcado por defecto, se oculta)
        handlePromptSourceChange();
      });
    </script>
  </body>
</html>